<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360 Image + Spider Model + Auto Sound</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- ç…§æ˜ -->
      <a-light type="ambient" color="#777"></a-light>
      <a-light type="directional" color="#fff" position="1 2 2"></a-light>

      <!-- èƒŒæ™¯ -->
      <a-sky src="mori.jpg" rotation="0 -130 0"></a-sky>

      <!-- ğŸ•·ï¸ ã‚¯ãƒ¢ãƒ¢ãƒ‡ãƒ« -->
      <a-entity 
        id="spider"
        gltf-model="spider.glb"
        position="0 -1.5 -3"
        rotation="0 180 0"
        scale="0.5 0.5 0.5"
        animation="property: rotation; to: 0 540 0; loop: true; dur: 8000; easing: linear;">
      </a-entity>

      <!-- åŠ¹æœéŸ³ã‚’é³´ã‚‰ã™ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ -->
      <a-entity id="sound-player"></a-entity>
    </a-scene>

    <script>
      const soundFiles = [
        "åŠ¹æœéŸ³/hell_gear.mp3",
        "åŠ¹æœéŸ³/ç”·æ€§ã®æ‚²é³´.mp3",
        "åŠ¹æœéŸ³/é¢¨ãŒå¹ã1.mp3",
        "åŠ¹æœéŸ³/é¢¨ãŒå¹ã2.mp3",
        "åŠ¹æœéŸ³/é¢¨ãŒå¹ã3.mp3",
        "åŠ¹æœéŸ³/é¢¨ãŒå¹ã4.mp3"
      ];

      window.addEventListener('load', () => {
        const soundEntity = document.querySelector('#sound-player');
        const randomSound = soundFiles[Math.floor(Math.random() * soundFiles.length)];

        // æœ€åˆã¯éŸ³é‡0ã§å†ç”Ÿé–‹å§‹ï¼ˆè‡ªå‹•å†ç”Ÿå¯¾ç­–ï¼‰
        soundEntity.setAttribute('sound', `src: url(${randomSound}); autoplay: true; volume: 0;`);

        // 2ç§’å¾Œã«éŸ³é‡ã‚’ä¸Šã’ã‚‹
        setTimeout(() => {
          try {
            soundEntity.components.sound.pool.children[0].volume = 1.0;
          } catch (e) {
            console.warn("éŸ³é‡å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ:", e);
          }
        }, 2000);
      });
    </script>
  </body>
</html>
