<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360 Image Auto Sound</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-light type="ambient" color="#555"></a-light>
      <a-sky src="mori.jpg" rotation="0 -130 0"></a-sky>

      <!-- 効果音を鳴らすエンティティ -->
      <a-entity id="sound-player"></a-entity>
    </a-scene>

    <script>
      const soundFiles = [
        "効果音/hell_gear.mp3",
        "効果音/男性の悲鳴.mp3",
        "効果音/風が吹く1.mp3",
        "効果音/風が吹く2.mp3",
        "効果音/風が吹く3.mp3",
        "効果音/風が吹く4.mp3"
      ];

      window.addEventListener('load', () => {
        const soundEntity = document.querySelector('#sound-player');
        const randomSound = soundFiles[Math.floor(Math.random() * soundFiles.length)];

        // 最初は音量0で設定して再生開始
        soundEntity.setAttribute('sound', `src: url(${randomSound}); autoplay: true; volume: 0;`);

        // 2秒後に音量を上げる（ブラウザが自動再生を許可していれば音が出る）
        setTimeout(() => {
          try {
            soundEntity.components.sound.pool.children[0].volume = 1.0;
          } catch (e) {
            console.warn("音量変更に失敗しました:", e);
          }
        }, 2000);
      });
    </script>
  </body>
</html>
