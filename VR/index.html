<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360 Image + Spider Model + Random Auto Sound</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- 照明 -->
      <a-light type="ambient" color="#777"></a-light>
      <a-light type="directional" color="#fff" position="1 2 2"></a-light>

      <!-- 背景 -->
      <a-sky src="mori.jpg" rotation="0 -130 0"></a-sky>

<a-entity
  gltf-model="spider.glb"
  animation-mixer
  position="0 -1.5 -3"
  scale="0.2 0.2 0.2">
</a-entity>



      <!-- 効果音エンティティ -->
      <a-entity id="sound-player"></a-entity>
    </a-scene>

    <script>
      const soundFiles = [
        "効果音/hell_gear.mp3",
        "効果音/突風が吹く.mp3",
        "効果音/風が吹く1.mp3",
        "効果音/風が吹く2.mp3",
        "効果音/風が吹く3.mp3",
        "効果音/風が吹く4.mp3"
      ];

      const soundEntity = document.querySelector('#sound-player');

      // ランダムな音を再生する関数
      function playRandomSound() {
        const randomSound = soundFiles[Math.floor(Math.random() * soundFiles.length)];
        soundEntity.setAttribute('sound', `src: url(${randomSound}); autoplay: true; volume: 1.0; loop: false;`);

        // soundが読み込まれたら再生開始
        soundEntity.addEventListener('sound-loaded', () => {
          soundEntity.components.sound.playSound();
        }, { once: true }); // 重複イベント防止
      }

      // 一定間隔でランダム再生
      function startRandomLoop() {
        playRandomSound();

        setInterval(() => {
          playRandomSound();
        }, Math.random() * 7000 + 8000); // 8〜15秒間隔
      }

      // ページ読み込み時に開始
      window.addEventListener('load', startRandomLoop);
    </script>
  </body>
</html>
