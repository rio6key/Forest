<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360 Image Test</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-light type="ambient" color="#555"></a-light>
      <a-sky src="mori.jpg" rotation="0 -130 0"></a-sky>

      <!-- 効果音を鳴らすエンティティ -->
      <a-entity id="sound-player"></a-entity>

      <!-- 再生を促すボタン -->
      <a-entity position="0 1.6 -3">
        <a-text value="クリックで音を再生" color="#FFF" align="center"></a-text>
      </a-entity>
    </a-scene>

    <script>
      const soundFiles = [
        "効果音/hell_gear.mp3",
        "効果音/男性の悲鳴.mp3",
        "効果音/風が吹く1.mp3",
        "効果音/風が吹く2.mp3",
        "効果音/風が吹く3.mp3",
        "効果音/風が吹く4.mp3"
      ];

      // ページ読み込み完了後に処理
      window.addEventListener('load', () => {
        const soundEntity = document.querySelector('#sound-player');

        // クリック時に再生
        window.addEventListener('click', () => {
          const randomSound = soundFiles[Math.floor(Math.random() * soundFiles.length)];
          soundEntity.setAttribute('sound', `src: url(${randomSound}); autoplay: true; volume: 1.0;`);
          soundEntity.components.sound.playSound();
        }, { once: true });
      });
    </script>
  </body>
</html>
